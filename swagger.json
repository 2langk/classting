{"openapi":"3.0.1","servers":[{"url":"http://localhost:4000","description":"Local Server"}],"info":{"version":"0.0.1","title":"classting","description":"","license":{"name":"UNLICENSED"}},"paths":{"/news":{"post":{"tags":["News"],"parameters":[],"requestBody":{"description":"소식 생성에 필요한 정보","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateOneNewsData"}}},"required":true},"responses":{"201":{"description":"소식 id","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateOneNewsView"}}}},"400":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateOneNewsException"}}}}},"summary":"소식 생성하기","description":"소식 생성하기.\n- 해당 학교의 관리자만 가능합니다.","security":[{"bearer":[]}]}},"/news/{id}":{"put":{"tags":["News"],"parameters":[{"name":"id","in":"path","schema":{"type":"number"},"description":"","required":true}],"requestBody":{"description":"소식 수정에 필요한 정보","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OmitUpdateOneNewsDataid"}}},"required":true},"responses":{"200":{"description":"소식 id","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateOneNewsView"}}}},"400":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateOneNewsException"}}}}},"summary":"소식 수정하기","description":"소식 수정하기.\n- 해당 소식의 작성자만 가능합니다.","security":[{"bearer":[]}]},"delete":{"tags":["News"],"parameters":[{"name":"id","in":"path","schema":{"type":"number"},"description":"","required":true}],"responses":{"200":{"description":"소식 id","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DeleteOneNewsView"}}}},"400":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DeleteOneNewsException"}}}}},"summary":"소식 삭제하기","description":"소식 삭제하기.\n- 해당 소식의 작성자만 가능합니다.","security":[{"bearer":[]}]}},"/schools":{"post":{"tags":["School"],"parameters":[],"requestBody":{"description":"학교 생성에 필요한 정보","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateOneSchoolData"}}},"required":true},"responses":{"201":{"description":"학교 id","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateOneSchoolView"}}}},"400":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateOneSchoolException"}}}}},"summary":"학교 생성하기","description":"학교 생성하기.\n- 관리자(admin) 유저만 가능합니다.","security":[{"bearer":[]}]},"get":{"tags":["School"],"parameters":[{"name":"data","in":"query","schema":{"$ref":"#/components/schemas/FindManySchoolData"},"description":"필터 & 페이지네이션 정보","required":true}],"responses":{"200":{"description":"학교 목록","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FindManySchoolView"}}}},"400":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FindManySchoolException"}}}}},"summary":"학교 목록 조회하기","description":"학교 목록 조회하기."}},"/subscriptions":{"post":{"tags":["Subscription"],"parameters":[],"requestBody":{"description":"구독(취소)할 학교 id","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpsertOneSubscriptionData"}}},"required":true},"responses":{"201":{"description":"구독 id","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpsertOneSubsriptionView"}}}},"400":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpsertOneSubsriptionException"}}}}},"summary":"학교 구독(or 취소) 하기","description":"학교 구독(or 취소) 하기.\n- 학생(student) 유저만 가능합니다.\n- 기존값과 반대로 upsert 합니다.","security":[{"bearer":[]}]}},"/subscriptions/me":{"get":{"tags":["Subscription"],"parameters":[],"responses":{"200":{"description":"구독중인 학교 ids","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GetSubscriptionMeView"}}}},"400":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GetSubscriptionMeException"}}}}},"summary":"자기 구독 정보 가져오기","description":"자기 구독 정보 가져오기.","security":[{"bearer":[]}]}},"/users/sign-up":{"post":{"tags":["User"],"parameters":[],"requestBody":{"description":"회원가입에 필요한 정보","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SignUpUserData"}}},"required":true},"responses":{"201":{"description":"유저 id","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SignUpUserView"}}}},"400":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SignUpUserException"}}}}},"summary":"회원가입하기","description":"회원가입하기.\n- email은 중복 불가합니다."}},"/users/sign-in":{"post":{"tags":["User"],"parameters":[],"requestBody":{"description":"이메일, 비밀번호","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SignInUserData"}}},"required":true},"responses":{"201":{"description":"엑세스 토큰","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SignInUserView"}}}},"400":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SignInUserException"}}}}},"summary":"로그인하기","description":"로그인하기.\n- 인증에 성공하면 jwt를 받습니다.\n- 앞으로, Bearer {accessToken} 형식으로 유저를 인증합니다."}},"/users/me":{"get":{"tags":["User"],"parameters":[],"responses":{"200":{"description":"유저 정보","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GetUserMeView"}}}},"400":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GetUserMeException"}}}}},"summary":"자기 정보 가져오기","description":"자기 정보 가져오기.\n- 요청에 accessToken이 있어야 접근 가능합니다.","security":[{"bearer":[]}]}}},"components":{"schemas":{"CreateOneNewsData":{"type":"object","properties":{"title":{"type":"string"},"contents":{"type":"string"},"schoolId":{"type":"number"}},"nullable":false,"required":["title","contents","schoolId"]},"CreateOneNewsException":{"type":"object","properties":{"name":{"type":"string"},"message":{"type":"string","enum":["internal server error.","invalid access token.","invalid request data.","not authorized.","permission denied."]},"statusCode":{"type":"number"}},"nullable":false,"required":["name","message","statusCode"]},"CreateOneNewsView":{"type":"object","properties":{"id":{"type":"number"}},"nullable":false,"required":["id"]},"OmitUpdateOneNewsDataid":{"type":"object","properties":{"title":{"type":"string"},"contents":{"type":"string"}},"nullable":false,"description":"Construct a type with the properties of T except for those in type K."},"UpdateOneNewsException":{"type":"object","properties":{"name":{"type":"string"},"message":{"type":"string","enum":["internal server error.","invalid access token.","invalid request data.","news notfound.","not authorized.","permission denied."]},"statusCode":{"type":"number"}},"nullable":false,"required":["name","message","statusCode"]},"UpdateOneNewsView":{"type":"object","properties":{"id":{"type":"number"}},"nullable":false,"required":["id"]},"DeleteOneNewsException":{"type":"object","properties":{"name":{"type":"string"},"message":{"type":"string","enum":["internal server error.","invalid access token.","invalid request data.","news notfound.","not authorized.","permission denied."]},"statusCode":{"type":"number"}},"nullable":false,"required":["name","message","statusCode"]},"DeleteOneNewsView":{"type":"object","properties":{"id":{"type":"number"}},"nullable":false,"required":["id"]},"CreateOneSchoolData":{"type":"object","properties":{"name":{"type":"string"},"region":{"type":"string"}},"nullable":false,"required":["name","region"]},"CreateOneSchoolException":{"type":"object","properties":{"name":{"type":"string"},"message":{"type":"string","enum":["asd.","internal server error.","invalid access token.","invalid request data.","not authorized."]},"statusCode":{"type":"number"}},"nullable":false,"required":["name","message","statusCode"]},"CreateOneSchoolView":{"type":"object","properties":{"id":{"type":"number"}},"nullable":false,"required":["id"]},"FindManySchoolData":{"type":"object","properties":{"cursorId":{"type":"number"},"pageSize":{"type":"number"}},"nullable":false,"required":["pageSize"]},"FindManySchoolException":{"type":"object","properties":{"name":{"type":"string"},"message":{"type":"string","enum":["asd.","internal server error.","invalid access token.","invalid request data.","not authorized."]},"statusCode":{"type":"number"}},"nullable":false,"required":["name","message","statusCode"]},"FindManySchoolView":{"type":"object","properties":{"schools":{"type":"array","items":{"type":"object","properties":{"id":{"type":"number"},"name":{"type":"string"},"region":{"type":"string"}},"nullable":false,"required":["id","name","region"]}}},"nullable":false,"required":["schools"]},"UpsertOneSubscriptionData":{"type":"object","properties":{"schoolId":{"type":"number"}},"nullable":false,"required":["schoolId"]},"UpsertOneSubsriptionException":{"type":"object","properties":{"name":{"type":"string"},"message":{"type":"string","enum":["internal server error.","invalid access token.","invalid request data.","not authorized.","school notfound."]},"statusCode":{"type":"number"}},"nullable":false,"required":["name","message","statusCode"]},"UpsertOneSubsriptionView":{"type":"object","properties":{"id":{"type":"number"}},"nullable":false,"required":["id"]},"GetSubscriptionMeException":{"type":"object","properties":{"name":{"type":"string"},"message":{"type":"string","enum":["-.","internal server error.","invalid access token.","invalid request data.","not authorized."]},"statusCode":{"type":"number"}},"nullable":false,"required":["name","message","statusCode"]},"GetSubscriptionMeView":{"type":"object","properties":{"schoolIds":{"type":"array","items":{"type":"number"}}},"nullable":false,"required":["schoolIds"]},"SignUpUserData":{"type":"object","properties":{"email":{"type":"string","format":"email"},"password":{"type":"string"},"name":{"type":"string"},"userRole":{"type":"string","enum":["admin","student"]}},"nullable":false,"required":["email","password","name","userRole"]},"SignUpUserException":{"type":"object","properties":{"name":{"type":"string"},"message":{"type":"string","enum":["already email exist.","internal server error.","invalid access token.","invalid request data.","not authorized."]},"statusCode":{"type":"number"}},"nullable":false,"required":["name","message","statusCode"]},"SignUpUserView":{"type":"object","properties":{"id":{"type":"number"}},"nullable":false,"required":["id"]},"SignInUserData":{"type":"object","properties":{"email":{"type":"string","format":"email"},"password":{"type":"string"}},"nullable":false,"required":["email","password"]},"SignInUserException":{"type":"object","properties":{"name":{"type":"string"},"message":{"type":"string","enum":["internal server error.","invalid access token.","invalid email or password.","invalid request data.","not authorized."]},"statusCode":{"type":"number"}},"nullable":false,"required":["name","message","statusCode"]},"SignInUserView":{"type":"object","properties":{"accessToken":{"type":"string"}},"nullable":false,"required":["accessToken"]},"GetUserMeException":{"type":"object","properties":{"name":{"type":"string"},"message":{"type":"string","enum":["internal server error.","invalid access token.","invalid request data.","not authorized.","user notfound."]},"statusCode":{"type":"number"}},"nullable":false,"required":["name","message","statusCode"]},"GetUserMeView":{"type":"object","properties":{"id":{"type":"number"},"name":{"type":"string"},"userRole":{"type":"object","properties":{"id":{"type":"number"},"type":{"$ref":"#/components/schemas/UserRoleEnum"}},"nullable":false,"required":["id","type"]}},"nullable":false,"required":["id","name","userRole"]},"UserRoleEnum":{"type":"string","enum":["operator","admin","student"]}},"securitySchemes":{"bearer":{"type":"http","scheme":"bearer"}}}}